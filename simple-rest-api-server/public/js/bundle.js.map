{"version":3,"sources":["webpack://simple-rest-api-server/./src/js/app.js"],"names":["todos","navState","$todos","document","querySelector","$inputTodo","$completeAll","$completedTodos","$activeTodos","$clearCompleted","$nav","render","html","_todos","filter","completed","forEach","id","content","innerHTML","textContent","length","setTodos","getTodos","axios","get","then","response","data","console","error","generateId","Math","max","map","todo","addTodo","post","toggleTodo","find","patch","removeTodo","toggleCompleteAll","removeCompleted","changeNavState","children","$navItem","classList","toggle","log","window","onload","onkeyup","keyCode","target","value","trim","onchange","e","parentNode","onclick","matches","checked"],"mappings":"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","file":"bundle.js","sourcesContent":["// import ajax from './xhr.js';\n// import ajax from './promise.js'; \n// const axios = require('axios');\n// import axios from './axios.js';\n\n// import axios from 'axios';\n\n// console.log(ajax);\n// axios.get('/todos');\n\n// State\nlet todos = [];\nlet navState = 'all';\n\n// DOMs\nconst $todos = document.querySelector('.todos');\nconst $inputTodo = document.querySelector('.input-todo');\nconst $completeAll = document.querySelector('.complete-all > .checkbox');\nconst $completedTodos = document.querySelector('.completed-todos');\nconst $activeTodos = document.querySelector('.active-todos');\nconst $clearCompleted = document.querySelector('.clear-completed > .btn');\nconst $nav = document.querySelector('.nav');\n\nconst render = () => {\n  let html = '';\n\n  const _todos = todos.filter(({ completed }) =>\n    (navState === 'completed' ? completed : navState === 'active' ? !completed : true)\n  );\n\n  _todos.forEach(({ id, content, completed }) => {\n    html += `<li id=\"${id}\" class=\"todo-item\">\n        <input id=\"ck-${id}\" class=\"checkbox\" type=\"checkbox\" ${completed ? 'checked' : ''}>\n        <label for=\"ck-${id}\">${content}</label>\n        <i class=\"remove-todo far fa-times-circle\"></i>\n      </li>`;\n  });\n\n  $todos.innerHTML = html;\n  $completedTodos.textContent = todos.filter(({ completed }) => completed).length;\n  $activeTodos.textContent = todos.filter(({ completed }) => !completed).length;\n};\n\nconst setTodos = _todos => {\n  todos = _todos;\n  render();\n};\n\nconst getTodos = () => {\n  // todos = [\n  //   { id: 1, content: 'HTML', completed: false },\n  //   { id: 2, content: 'CSS', completed: true },\n  //   { id: 3, content: 'Javascript', completed: false }\n  // ].sort((todo1, todo2) => todo2.id - todo1.id);\n  // console.log('[getTodos]', todos);\n\n  // render();\n  // ajax.get('/todos', setTodos);\n  \n  // ajax.get('/todos') // 프로미스 반환, then하나 catch하나는 써주는 것이 좋음(에러처리도 항상 염두해두자)\n  //   .then(setTodos)\n  //   .catch(console.error);\n  \n  axios.get('/todos')\n    .then(response => response.data)\n    .then(setTodos) // 선택적으로 호출(fulfilled 상태일 때)\n    .catch(console.error); // 선택적으로 호출됨(상태가 rejected로 바뀐다면)\n};\n\nconst generateId = () => (todos.length ? Math.max(...todos.map(todo => todo.id)) + 1 : 1);\n\nconst addTodo = content => {\n  // todos = [{ id: generateId(), content, completed: false }, ...todos];\n  // console.log('[addTodo]', todos);\n\n  // render();\n  \n  // ajax.post('/todos', {id: generateId(), content, completed: false}, setTodos);\n\n  // ajax.post('/todos', {id: generateId(), content, completed: false})\n  //   .then(setTodos)\n  //   .catch(console.error);\n\n  axios.post('/todos', { id: generateId(), content, completed: false })\n    .then(response => response.data)\n    .then(setTodos)\n    .catch(console.error);\n};\n\nconst toggleTodo = id => {\n  // todos = todos.map(todo => (todo.id === +id ? { ...todo, completed: !todo.completed } : todo));\n  // console.log('[toggleTodo]', todos);\n\n  // render();\n  const completed = !todos.find(todo => todo.id === +id).completed;\n  // ajax.patch(`/todos/${id}`, { completed }, setTodos);\n\n  // ajax.patch(`/todos/${id}`, { completed })\n  //   .then(setTodos)\n  //   .catch(console.error);\n  \n  axios.patch(`/todos/${id}`, { completed })\n    // .then(console.log)\n    .then(response => response.data)\n    // .then(console.log)\n    .then(setTodos)\n    .catch(console.error);\n};\n\nconst removeTodo = id => {\n  // todos = todos.filter(todo => todo.id !== +id);\n  // console.log('[removeTodo]', todos);\n\n  // render();\n\n  // ajax.delete(`/todos/${id}`, setTodos);\n\n  // ajax.delete(`/todos/${id}`)\n  //   .then(setTodos)\n  //   .catch(console.error);\n\n  axios.delete(`/todos/${id}`)\n    .then(response => response.data)\n    .then(setTodos)\n    .catch(console.error);\n};\n\nconst toggleCompleteAll = completed => {\n  // todos = todos.map(todo => ({ ...todo, completed }));\n  // console.log('[toggleCompleteAll]', todos);\n\n  // render();\n\n  // ajax.patch('/todos', { completed }, setTodos);\n\n  // ajax.patch('/todos', { completed })\n  //   .then(setTodos)\n  //   .catch(console.error);\n\n  axios.patch('/todos', { completed })\n    .then(response => response.data)\n    .then(setTodos)\n    .catch(console.error);\n};\n\nconst removeCompleted = () => {\n  // todos = todos.filter(todo => !todo.completed);\n  // console.log('[removeCompleted]', todos);\n\n  // render();\n\n  // ajax.delete('/todos/completed')\n  //   .then(setTodos)\n  //   .catch(console.error);\n  \n  axios.delete('/todos/completed')\n    .then(response => response.data)\n    .then(setTodos)\n    .catch(console.error);\n};\n\nconst changeNavState = id => {\n  [...$nav.children].forEach($navItem => {\n    $navItem.classList.toggle('active', $navItem.id === id);\n  });\n\n  navState = id;\n\n  console.log('[changeNavState]', navState);\n  render();\n};\n\n// Event bindings\nwindow.onload = getTodos;\n\n$inputTodo.onkeyup = ({ keyCode, target }) => {\n  const content = target.value.trim();\n  if (keyCode !== 13 || content === '') return;\n  addTodo(content);\n  target.value = '';\n};\n\n$todos.onchange = e => {\n  toggleTodo(e.target.parentNode.id);\n};\n\n$todos.onclick = e => {\n  if (!e.target.matches('.todos > li > .remove-todo')) return;\n  removeTodo(e.target.parentNode.id);\n};\n\n$completeAll.onchange = e => {\n  toggleCompleteAll(e.target.checked);\n};\n\n$clearCompleted.onclick = removeCompleted;\n\n$nav.onclick = ({ target }) => {\n  if (target === $nav) return;\n  // if (!target.matches('.nav > li:not(.active)')) return;\n\n  changeNavState(target.id);\n};\n\naxios.get('http://localhost:7000/todos')\n  // .then(console.log)\n  .then(response => console.log(response.data));\n"],"sourceRoot":""}